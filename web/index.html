<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>8x8 Crawler</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div id="conn" class="status err">Connecting...</div>

    <h1>üöó 8x8 CRAWLER</h1>

    <div class="card">
      <h2>üéÆ RC INPUT</h2>
      <div class="channel">
        <div class="row">
          <span class="label">Throttle</span>
          <span class="value" id="thr">0</span>
        </div>
        <div class="bar-container">
          <div class="bar-center"></div>
          <div class="bar bar-throttle" id="thr-bar"></div>
        </div>
      </div>
      <div class="channel">
        <div class="row">
          <span class="label">Steering</span>
          <span class="value" id="str">0</span>
        </div>
        <div class="bar-container">
          <div class="bar-center"></div>
          <div class="bar bar-steering" id="str-bar"></div>
        </div>
      </div>
      <div class="row">
        <span class="label">Signal</span>
        <span id="sig" class="status ok">OK</span>
      </div>
    </div>

    <div class="card">
      <h2>üöõ VEHICLE STATUS</h2>
      <div class="vehicle-container">
        <!-- 8x8 Vehicle Visualization -->
        <svg viewBox="0 0 200 320" class="vehicle-svg">
          <!-- Vehicle body -->
          <rect
            x="50"
            y="20"
            width="100"
            height="280"
            rx="10"
            class="vehicle-body"
          />

          <!-- Direction arrow -->
          <polygon points="100,35 90,50 110,50" class="direction-arrow" />

          <!-- Axle 1 (Front) -->
          <g class="axle" id="axle1-g">
            <rect
              x="30"
              y="38"
              width="12"
              height="28"
              rx="2"
              class="wheel"
              id="wheel1l"
            />
            <rect
              x="158"
              y="38"
              width="12"
              height="28"
              rx="2"
              class="wheel"
              id="wheel1r"
            />
            <line x1="50" y1="52" x2="42" y2="52" class="axle-line" />
            <line x1="150" y1="52" x2="158" y2="52" class="axle-line" />
            <text x="100" y="57" class="axle-label">A1</text>
            <text x="8" y="57" class="axle-value" id="a1-val">1500</text>
          </g>

          <!-- Axle 2 -->
          <g class="axle" id="axle2-g">
            <rect
              x="30"
              y="103"
              width="12"
              height="28"
              rx="2"
              class="wheel"
              id="wheel2l"
            />
            <rect
              x="158"
              y="103"
              width="12"
              height="28"
              rx="2"
              class="wheel"
              id="wheel2r"
            />
            <line x1="50" y1="117" x2="42" y2="117" class="axle-line" />
            <line x1="150" y1="117" x2="158" y2="117" class="axle-line" />
            <text x="100" y="122" class="axle-label">A2</text>
            <text x="8" y="122" class="axle-value" id="a2-val">1500</text>
          </g>

          <!-- Axle 3 -->
          <g class="axle" id="axle3-g">
            <rect
              x="30"
              y="183"
              width="12"
              height="28"
              rx="2"
              class="wheel"
              id="wheel3l"
            />
            <rect
              x="158"
              y="183"
              width="12"
              height="28"
              rx="2"
              class="wheel"
              id="wheel3r"
            />
            <line x1="50" y1="197" x2="42" y2="197" class="axle-line" />
            <line x1="150" y1="197" x2="158" y2="197" class="axle-line" />
            <text x="100" y="202" class="axle-label">A3</text>
            <text x="8" y="202" class="axle-value" id="a3-val">1500</text>
          </g>

          <!-- Axle 4 (Rear) -->
          <g class="axle" id="axle4-g">
            <rect
              x="30"
              y="248"
              width="12"
              height="28"
              rx="2"
              class="wheel"
              id="wheel4l"
            />
            <rect
              x="158"
              y="248"
              width="12"
              height="28"
              rx="2"
              class="wheel"
              id="wheel4r"
            />
            <line x1="50" y1="262" x2="42" y2="262" class="axle-line" />
            <line x1="150" y1="262" x2="158" y2="262" class="axle-line" />
            <text x="100" y="267" class="axle-label">A4</text>
            <text x="8" y="267" class="axle-value" id="a4-val">1500</text>
          </g>

          <!-- ESC indicator -->
          <rect x="70" y="140" width="60" height="40" rx="5" class="esc-box" />
          <text x="100" y="155" class="esc-label">ESC</text>
          <text x="100" y="172" class="esc-value" id="esc-val">1500</text>
        </svg>
      </div>
    </div>

    <div class="card">
      <h2>üîß STEERING MODE</h2>
      <div class="aux-status">
        <span class="aux-label">AUX1:</span
        ><span id="aux1-st" class="aux-val">OFF</span>
        <span class="aux-label">AUX2:</span
        ><span id="aux2-st" class="aux-val">OFF</span>
      </div>
      <div class="modes" id="modes">
        <button class="mode-btn" data-m="0">Front</button>
        <button class="mode-btn" data-m="2">All Axle</button>
        <button class="mode-btn" data-m="3">Crab</button>
        <button class="mode-btn" data-m="1">Rear</button>
        <button class="mode-btn aux-btn" id="aux-mode">AUX ‚áÑ</button>
      </div>
      <div class="mode-desc" id="mode-desc">Axles 1-2 steer, 3-4 fixed</div>
    </div>

    <div class="card">
      <h2>üìä SYSTEM</h2>
      <div class="row">
        <span class="label">Firmware</span>
        <span class="value" id="fw-ver">-</span>
      </div>
      <div class="row">
        <span class="label">Calibration</span>
        <span id="cal" class="status ok">Done</span>
      </div>
      <div class="row">
        <span class="label">Uptime</span>
        <span class="value" id="up">0s</span>
      </div>
    </div>

    <div class="card">
      <h2>üì∂ WIFI SETTINGS</h2>
      <div class="wifi-container">
        <div class="row">
          <span class="label">External WiFi</span>
          <label class="toggle">
            <input type="checkbox" id="wifi-enabled" />
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="wifi-status" id="wifi-status">
          <span class="label">Status:</span>
          <span id="wifi-conn-status" class="status">-</span>
        </div>
        <div class="wifi-ip" id="wifi-ip-row" style="display:none">
          <span class="label">IP:</span>
          <span class="value" id="wifi-ip">-</span>
        </div>
        <div class="wifi-form" id="wifi-form">
          <input type="text" id="wifi-ssid" placeholder="WiFi SSID" maxlength="32" />
          <input type="password" id="wifi-pass" placeholder="Password" maxlength="64" />
          <button id="wifi-save-btn" class="wifi-btn">Save & Connect</button>
        </div>
        <div class="wifi-hint">Connect to your home WiFi for OTA updates without switching networks</div>
      </div>
    </div>

    <div class="card">
      <h2>üîÑ FIRMWARE UPDATE</h2>
      <div class="ota-container">
        <input type="file" id="ota-file" accept=".bin" />
        <button id="ota-btn" class="ota-btn">Upload Firmware</button>
        <div class="ota-progress" id="ota-progress">
          <div class="ota-bar" id="ota-bar"></div>
        </div>
        <div class="ota-status" id="ota-status"></div>
      </div>
    </div>

    <div class="card">
      <h2>üìÅ WEB UI UPDATE</h2>
      <div class="spiffs-container">
        <div class="spiffs-info">
          <span class="label">Storage:</span>
          <span class="value" id="spiffs-usage">-</span>
        </div>
        <div class="spiffs-files" id="spiffs-files"></div>
        <div class="spiffs-upload">
          <input type="file" id="spiffs-file" multiple accept=".html,.css,.js,.json,.ico,.svg" />
          <button id="spiffs-btn" class="ota-btn">Upload Files</button>
        </div>
        <div class="ota-progress" id="spiffs-progress">
          <div class="ota-bar" id="spiffs-bar"></div>
        </div>
        <div class="ota-status" id="spiffs-status"></div>
        <div class="wifi-hint">Upload updated web files (html, css, js). Refresh page after upload.</div>
      </div>
    </div>

    <script src="/app.js"></script>
  </body>
</html>
